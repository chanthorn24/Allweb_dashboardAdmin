<div>
    <div style="display: flex; justify-content: space-between;">
        <h1 class="mat-h1" style="font-weight: 500;">Attendance</h1>

    </div>
    <div style="display: flex; flex-direction: row">
        <a routerLink="/account/dashboard">
            <h4>Dashboard</h4>
        </a>
        <h4 style="margin-left: 3px;">/ Attendance</h4>
    </div>
</div>
<div fxLayout="row wrap" fxLayoutGap="16px grid">
    <div fxFlex="33%" fxFlex.md="50%" fxFlex.sm="50%" fxFlex.xs="100%">
        <mat-card style="height: 300px;">
            <h2>Timesheet<span style="font-weight: 400;"> {{ time | date : 'dd MMM YYYY  h:mm:ss a' }} </span> </h2>
            <mat-card>
                <div style="font-weight: 400; font-size: 1.5em" *ngIf="checkType == 1 || checkType == 3">Clock In at</div>
                <div style="font-weight: 400; font-size: 1.5em " *ngIf="checkType == 2 || checkType == 4">Clock Out at</div>
                <div style="font-weight: 300; font-size: 1.2em"> {{dateTime}} {{ clockTime[checkType-1] | date : 'h:mm:ss a'}}</div>
            </mat-card>
            <div style="transform: translateX(30%);margin: 1em;">
                <!--Total hours work-->
                <div class="circle">{{ workTimeHour | number : ".1-1"}} Hours</div>
            </div>
        </mat-card>
    </div>
    <div fxFlex="33%" fxFlex.md="50%" fxFlex.sm="50%" fxFlex.xs="100%">
        <mat-card style="height: 300px;">
            <h2>Statistics</h2>
            <mat-card class="statistics">
                <div>
                    <div class="statistics__time">
                        <div>Today</div>
                        <div>{{ workTimeHour | number : ".1-1"}}<span> / 8hrs</span></div>
                    </div>
                    <mat-progress-bar mode="determinate" [value]="workTimeHour*100/8" tyle="border-radius: 10px;" class="today">
                    </mat-progress-bar>
                </div>
            </mat-card>
            <mat-card class="statistics">
                <div>
                    <div class="statistics__time">
                        <div>This Week</div>
                        <div>7<span> / 8hrs</span></div>
                    </div>
                    <mat-progress-bar mode="determinate" value="30" style="border-radius: 10px;" class="thisweek">
                    </mat-progress-bar>
                </div>
            </mat-card>
            <mat-card class="statistics">
                <div>
                    <div class="statistics__time">
                        <div>This Month</div>
                        <div>7<span> / 8hrs</span></div>
                    </div>
                    <mat-progress-bar mode="determinate" value="40" style="border-radius: 10px;" class="thismonth">
                    </mat-progress-bar>
                </div>
            </mat-card>

        </mat-card>
    </div>
    <div fxFlex="34%" fxFlex.md="50%" fxFlex.sm="50%" fxFlex.xs="100%">
        <mat-card style="height: 300px;">
            <h2>Today Activity</h2>
            <div class="container__activity">
                <!-- active -->
                <div class="step completed">
                    <div class="v-stepper">
                        <div class="circle"></div>
                        <div class="line"></div>
                    </div>
                    <div class="content" *ngIf="checkType == 1 || checkType == 2 || checkType == 3 || checkType == 4">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon><span>{{ clockTime[0] | date : 'h:mm:ss a'}}</span><span *ngIf="!clockTime[0]" style="color: red;">Missed</span>
                        </div>
                    </div>
                    <div class="content" *ngIf="!checkType">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon>
                        </div>
                    </div>
                </div>
                <div class="step active">
                    <div class="v-stepper">
                        <div class="circle"></div>
                        <div class="line"></div>
                    </div>
                    <div class="content" *ngIf="checkType == 2 || checkType == 3 || checkType == 4">
                        <span class="bold"> Clock Out at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon><span>{{ clockTime[1] | date : 'h:mm:ss a'}}</span><span *ngIf="!clockTime[1]" style="color: red;">Missed</span>
                        </div>
                    </div>
                    <div class="content" *ngIf="!checkType">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon>
                        </div>
                    </div>
                </div>
                <div class="step completed">
                    <div class="v-stepper">
                        <div class="circle"></div>
                        <div class="line"></div>
                    </div>
                    <div class="content" *ngIf="checkType == 3 || checkType == 4">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon><span>{{ clockTime[2] | date : 'h:mm:ss a'}}</span><span *ngIf="!clockTime[2]" style="color: red;">Missed</span>
                        </div>
                    </div>
                    <div class="content" *ngIf="!checkType">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon>
                        </div>
                    </div>
                </div>
                <div class="step active">
                    <div class="v-stepper">
                        <div class="circle"></div>
                        <div class="line"></div>
                    </div>
                    <div class="content" *ngIf="checkType == 4">
                        <span class="bold"> Clock Out at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon><span>{{ clockTime[3] | date : 'h:mm:ss a'}}</span><span *ngIf="!clockTime[3]" style="color: red;">Missed</span>
                        </div>
                    </div>
                    <div class="content" *ngIf="!checkType">
                        <span class="bold"> Clock In at</span>
                        <div style="display: flex;">
                            <mat-icon style="font-size: 1.45em;">access_time</mat-icon>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card>
    </div>


</div>
<div>
    <mat-card style="margin: 20px 0;">
        <mat-form-field background-color="#fafafa" appearance="outline" style="margin: 0 1%">
            <mat-label>Select Month</mat-label>
            <mat-select>
                <mat-option value="option">Jan</mat-option>
                <mat-option value="option">Feb</mat-option>
                <mat-option value="option">Mar</mat-option>
                <mat-option value="option">Apr</mat-option>
                <mat-option value="option">May</mat-option>
                <mat-option value="option">Jun</mat-option>
                <mat-option value="option">Jul</mat-option>
                <mat-option value="option">Aug</mat-option>
                <mat-option value="option">Sep</mat-option>
                <mat-option value="option">Oct</mat-option>
                <mat-option value="option">Nov</mat-option>
                <mat-option value="option">Dec</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" appearance="outline" style="margin: 0 1%">
            <mat-label>Select Year</mat-label>
            <mat-select>
                <mat-option value="option">2022</mat-option>
                <mat-option value="option">2021</mat-option>
                <mat-option value="option">2020</mat-option>
                <mat-option value="option">2019</mat-option>
                <mat-option value="option">2018</mat-option>
            </mat-select>
        </mat-form-field>
    </mat-card>
    <div>
        <h2 style="color: rgb(30, 140, 243);">Employees Monthly Attendance ({{ date | date: 'MMM yyyy' }})</h2>
    </div>

    <div>
        <table class="mat-elevation-z4" mat-table [dataSource]="dataSource" style="width: 100%;">
            <!-- Leave Type Column -->
            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef><span style="padding-left: 15px;"> Date </span></th>
                <td mat-cell *matCellDef="let element; let i = index">
                    <span style="font-weight: 500;" [ngStyle]="{'color': days[this.paginator.pageIndex * this.paginator.pageSize + i].color }">{{ days[this.paginator.pageIndex * this.paginator.pageSize + i].day }},</span>
                    <ng-container *ngFor="let item of element; let i = index">
                        <ng-container *ngIf="i == 0">
                            <span style="font-weight: 500; color: rgba(0,0,0,.54)"> {{ item.created.date | date: 'dd MMM yyyy' }}</span>
                        </ng-container>
                    </ng-container>
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="clock in 1">
                <th mat-header-cell *matHeaderCellDef> Clock in 1 </th>
                <td mat-cell *matCellDef="let element; let i = index">
                    <!-- {{ element.length }} -->
                    <ng-container *ngFor="let item of element">
                        <ng-container *ngIf="item.attendance_type == 'clock in 1'">
                            <div>{{ item.created.date | date: 'h:mm:ss a' }}</div>
                        </ng-container>
                        <ng-container *ngIf="item.attendance_type.name == 'clock in 1' && (days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sat' && days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sun')">
                            <div style="color: rgb(244, 67, 54, .7)">Not Clock In</div>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sat' || days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sun'">
                        <div style="color: rgb(240, 179, 24); font-weight: 500; font-style: italic">Week Off</div>
                    </ng-container>
                </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="clock out 1">
                <th mat-header-cell *matHeaderCellDef> Clock out 1 </th>
                <td mat-cell *matCellDef="let element; let i = index">
                    <ng-container *ngFor="let item of element">
                        <ng-container *ngIf="item.attendance_type == 'clock out 1'">
                            <div>{{ item.created.date | date: 'h:mm:ss a' }}</div>
                        </ng-container>
                        <ng-container *ngIf="item.attendance_type.name == 'clock out 1' && (days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sat' && days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sun')">
                            <div style="color: rgb(244, 67, 54, .7)">Not Clock Out</div>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sat' || days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sun'">
                        <div style="color: rgb(240, 179, 24); font-weight: 500; font-style: italic">Week Off</div>
                    </ng-container>
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="clock in 2">
                <th mat-header-cell *matHeaderCellDef> Clock in 2 </th>
                <td mat-cell *matCellDef="let element; let i = index">
                    <ng-container *ngFor="let item of element">
                        <ng-container *ngIf="item.attendance_type == 'clock in 2'">
                            <div>{{ item.created.date | date: 'h:mm:ss a' }}</div>
                        </ng-container>
                        <ng-container *ngIf="item.attendance_type.name == 'clock in 2' && (days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sat' && days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sun')">
                            <div style="color: rgb(244, 67, 54, .7)">Not Clock In</div>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sat' || days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sun'">
                        <div style="color: rgb(240, 179, 24); font-weight: 500; font-style: italic">Week Off</div>
                    </ng-container>
                </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="clock out 2">
                <th mat-header-cell *matHeaderCellDef> Clock out 2 </th>
                <td mat-cell *matCellDef="let element; let i = index">
                    <ng-container *ngFor="let item of element">
                        <ng-container *ngIf="item.attendance_type == 'clock out 2'">
                            <div>{{ item.created.date | date: 'h:mm:ss a' }}</div>
                        </ng-container>
                        <ng-container *ngIf="item.attendance_type.name == 'clock out 2' && (days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sat' && days[this.paginator.pageIndex * this.paginator.pageSize + i].day != 'Sun')">
                            <div style="color: rgb(244, 67, 54, .7)">Not Clock Out</div>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sat' || days[this.paginator.pageIndex * this.paginator.pageSize + i].day == 'Sun'">
                        <div style="color: rgb(240, 179, 24); font-weight: 500; font-style: italic">Week Off</div>
                    </ng-container>
                </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="total hours">
                <th mat-header-cell *matHeaderCellDef> Total Work Time </th>
                <td mat-cell *matCellDef="let element"></td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <mat-paginator style="padding-bottom: 20px; background-color: #fafafa;" [pageSizeOptions]="[7, 14, 21, 28]" showFirstLastButtons aria-label="Select page of periodic elements">
    </mat-paginator>
</div>